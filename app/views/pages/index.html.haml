- content_for :title do
  Riak on Rails

%section#intro
  :markdown
    Ripple is a modeling layer for Riak, mapping Riak keys, values, and indexes to
    ActiveModel objects. It's inspired by ActiveRecord, DataMapper, and MongoMapper.

%section#basics
  :markdown
    ## tl;dr

        class Vehicle
          include Ripple::Document

          property :license, String, presence: true, index: true
          property :region, String

          property :serial, String, presence: true, index: true
          property :name, String

          one :model, using: :stored_key # adds a model_key property

          # looks for vehicle_key if Option is a Document, or
          # adds an options collection if Option is an EmbeddedDocument
          many :options

          index :region_license, String do
            "\#{region}-\#{license}"
          end

          def self.find_by_region_and_license(region, license)
            index_key = "\#{region}-\#{license}"

            # find_by returns an array
            candidates = find_by :region_license, index_key
            return candidates.first
          end
        end

%section#dependencies
  :markdown
    ## Dependencies

    Ripple requires Ruby 1.8.7 or later. It depends on `activemodel` 3.0, 3.1, or 3.2, 
    and the many gems (including `activesupport`) that `activemodel` depends on.

    Ripple uses the `riak-client` gem to connect to Riak.

    Use `bundler` to handle dependencies; put this in your `Gemfile`.

        source 'https://rubygems.org'

        gem 'ripple', '~> 1.0.0.beta2'
        
    Once you've configured that, run `bundle` and Ripple will be available.

    Rails applications will automatically load `ripple`. Non-Rails applications
    should `require "ripple"` at some point.

