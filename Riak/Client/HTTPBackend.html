<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: Riak::Client::HTTPBackend
  
    &mdash; Documentation by YARD 0.7.2
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '../..';
  if (relpath != '') relpath += '/';
</script>

  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="../../_index.html">Index (H)</a> &raquo; 
    <span class='title'><span class='object_link'><a href="../../Riak.html" title="Riak (module)">Riak</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Client.html" title="Riak::Client (class)">Client</a></span></span>
     &raquo; 
    <span class="title">HTTPBackend</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a id="class_list_link" href="#">Class List</a>
  
    <a id="method_list_link" href="#">Method List</a>
  
    <a id="file_list_link" href="#">File List</a>
  
</div>
      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: Riak::Client::HTTPBackend
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName"><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></span>
      
        <ul class="fullTree">
          <li><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></li>
          
            <li class="next">Riak::Client::HTTPBackend</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
      <dt class="r2">Includes:</dt>
      <dd class="r2"><span class='object_link'><a href="HTTPBackend/Configuration.html" title="Riak::Client::HTTPBackend::Configuration (module)">Configuration</a></span>, <span class='object_link'><a href="HTTPBackend/ObjectMethods.html" title="Riak::Client::HTTPBackend::ObjectMethods (module)">ObjectMethods</a></span>, <span class='object_link'><a href="HTTPBackend/TransportMethods.html" title="Riak::Client::HTTPBackend::TransportMethods (module)">TransportMethods</a></span>, <span class='object_link'><a href="../Util/Escape.html" title="Riak::Util::Escape (module)">Util::Escape</a></span>, <span class='object_link'><a href="../Util/Translation.html" title="Riak::Util::Translation (module)">Util::Translation</a></span></dd>
      
    
  
  
  
    <dt class="r1 last">Defined in:</dt>
    <dd class="r1 last">riak-client/lib/riak/client/http_backend.rb<span class="defines">,<br />
  riak-client/lib/riak/client/http_backend/key_streamer.rb,<br /> riak-client/lib/riak/client/http_backend/configuration.rb,<br /> riak-client/lib/riak/client/http_backend/object_methods.rb,<br /> riak-client/lib/riak/client/http_backend/request_headers.rb,<br /> riak-client/lib/riak/client/http_backend/transport_methods.rb</span>
</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>
The parent class for all backends that connect to Riak via HTTP. This class
implements all of the universal backend API methods on behalf of
subclasses, which need only implement the <span class='object_link'><a href="HTTPBackend/TransportMethods.html#perform-instance_method" title="Riak::Client::HTTPBackend::TransportMethods#perform (method)">TransportMethods#perform</a></span> method
for library-specific semantics.
</p>


  </div>
</div>
<div class="tags">
  
</div><div id="subclasses">
  <h2>Direct Known Subclasses</h2>
  <p class="children"><span class='object_link'><a href="CurbBackend.html" title="Riak::Client::CurbBackend (class)">CurbBackend</a></span>, <span class='object_link'><a href="ExconBackend.html" title="Riak::Client::ExconBackend (class)">ExconBackend</a></span>, <span class='object_link'><a href="NetHTTPBackend.html" title="Riak::Client::NetHTTPBackend (class)">NetHTTPBackend</a></span></p>
</div>
<h2>Defined Under Namespace</h2>
<p class="children">
   
    
      <strong class="modules">Modules:</strong> <span class='object_link'><a href="HTTPBackend/Configuration.html" title="Riak::Client::HTTPBackend::Configuration (module)">Configuration</a></span>, <span class='object_link'><a href="HTTPBackend/ObjectMethods.html" title="Riak::Client::HTTPBackend::ObjectMethods (module)">ObjectMethods</a></span>, <span class='object_link'><a href="HTTPBackend/TransportMethods.html" title="Riak::Client::HTTPBackend::TransportMethods (module)">TransportMethods</a></span>
    
   
    
  
</p>


  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <h2>Instance Attribute Summary <small>(<a href="#" class="summary_toggle">collapse</a>)</small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#client-instance_method" title="#client (instance method)">- (Object) <strong>client</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
The Riak::Client that uses this backend.
</p>
</div></span>
  
</li>

    
  </ul>



  
  
  
  
  
  
  
  
  
  
  
  
  
  
  

  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#delete_object-instance_method" title="#delete_object (instance method)">- (Object) <strong>delete_object</strong>(bucket, key, rw = nil) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Deletes an object.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#fetch_object-instance_method" title="#fetch_object (instance method)">- (RObject) <strong>fetch_object</strong>(bucket, key, r = nil) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Fetches an object by bucket/key.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_bucket_props-instance_method" title="#get_bucket_props (instance method)">- (Hash) <strong>get_bucket_props</strong>(bucket) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Fetches bucket properties.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (HTTPBackend) <strong>initialize</strong>(client) </a>
    

    
  </span>
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Create an HTTPBackend for the Riak::Client.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#link_walk-instance_method" title="#link_walk (instance method)">- (Array&lt;Array&lt;RObject&gt;&gt;) <strong>link_walk</strong>(robject, walk_specs) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Performs a link-walking query.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#list_buckets-instance_method" title="#list_buckets (instance method)">- (Array&lt;String&gt;) <strong>list_buckets</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Lists known buckets.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#list_keys-instance_method" title="#list_keys (instance method)">- (Array&lt;String&gt;) <strong>list_keys</strong>(bucket) {|Array&lt;String&gt;| ... }</a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
List keys in a bucket.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mapred-instance_method" title="#mapred (instance method)">- (Array&lt;Object&gt;) <strong>mapred</strong>(mr) {|Fixnum, Object| ... }</a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Performs a MapReduce query.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#ping-instance_method" title="#ping (instance method)">- (true, false) <strong>ping</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Pings the server.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#reload_object-instance_method" title="#reload_object (instance method)">- (Object) <strong>reload_object</strong>(robject, r = nil) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Reloads the data for a given RObject, a special case of <span class='object_link'><a href="#fetch_object-instance_method" title="Riak::Client::HTTPBackend#fetch_object (method)">#fetch_object</a></span>.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#set_bucket_props-instance_method" title="#set_bucket_props (instance method)">- (Object) <strong>set_bucket_props</strong>(bucket, props) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Sets bucket properties.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#stats-instance_method" title="#stats (instance method)">- (Hash) <strong>stats</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Gets health statistics.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#store_object-instance_method" title="#store_object (instance method)">- (Object) <strong>store_object</strong>(robject, returnbody = false, w = nil, dw = nil) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Stores an object.
</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="HTTPBackend/ObjectMethods.html" title="Riak::Client::HTTPBackend::ObjectMethods (module)">ObjectMethods</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="HTTPBackend/ObjectMethods.html#load_object-instance_method" title="Riak::Client::HTTPBackend::ObjectMethods#load_object (method)">#load_object</a></span>, <span class='object_link'><a href="HTTPBackend/ObjectMethods.html#reload_headers-instance_method" title="Riak::Client::HTTPBackend::ObjectMethods#reload_headers (method)">#reload_headers</a></span>, <span class='object_link'><a href="HTTPBackend/ObjectMethods.html#store_headers-instance_method" title="Riak::Client::HTTPBackend::ObjectMethods#store_headers (method)">#store_headers</a></span></p>

  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="HTTPBackend/TransportMethods.html" title="Riak::Client::HTTPBackend::TransportMethods (module)">TransportMethods</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="HTTPBackend/TransportMethods.html#basic_auth_header-instance_method" title="Riak::Client::HTTPBackend::TransportMethods#basic_auth_header (method)">#basic_auth_header</a></span>, <span class='object_link'><a href="HTTPBackend/TransportMethods.html#client_id-instance_method" title="Riak::Client::HTTPBackend::TransportMethods#client_id (method)">#client_id</a></span>, <span class='object_link'><a href="HTTPBackend/TransportMethods.html#default_headers-instance_method" title="Riak::Client::HTTPBackend::TransportMethods#default_headers (method)">#default_headers</a></span>, <span class='object_link'><a href="HTTPBackend/TransportMethods.html#delete-instance_method" title="Riak::Client::HTTPBackend::TransportMethods#delete (method)">#delete</a></span>, <span class='object_link'><a href="HTTPBackend/TransportMethods.html#get-instance_method" title="Riak::Client::HTTPBackend::TransportMethods#get (method)">#get</a></span>, <span class='object_link'><a href="HTTPBackend/TransportMethods.html#head-instance_method" title="Riak::Client::HTTPBackend::TransportMethods#head (method)">#head</a></span>, <span class='object_link'><a href="HTTPBackend/TransportMethods.html#path-instance_method" title="Riak::Client::HTTPBackend::TransportMethods#path (method)">#path</a></span>, <span class='object_link'><a href="HTTPBackend/TransportMethods.html#perform-instance_method" title="Riak::Client::HTTPBackend::TransportMethods#perform (method)">#perform</a></span>, <span class='object_link'><a href="HTTPBackend/TransportMethods.html#post-instance_method" title="Riak::Client::HTTPBackend::TransportMethods#post (method)">#post</a></span>, <span class='object_link'><a href="HTTPBackend/TransportMethods.html#put-instance_method" title="Riak::Client::HTTPBackend::TransportMethods#put (method)">#put</a></span>, <span class='object_link'><a href="HTTPBackend/TransportMethods.html#return_body%3F-instance_method" title="Riak::Client::HTTPBackend::TransportMethods#return_body? (method)">#return_body?</a></span>, <span class='object_link'><a href="HTTPBackend/TransportMethods.html#root_uri-instance_method" title="Riak::Client::HTTPBackend::TransportMethods#root_uri (method)">#root_uri</a></span>, <span class='object_link'><a href="HTTPBackend/TransportMethods.html#valid_response%3F-instance_method" title="Riak::Client::HTTPBackend::TransportMethods#valid_response? (method)">#valid_response?</a></span>, <span class='object_link'><a href="HTTPBackend/TransportMethods.html#verify_path%21-instance_method" title="Riak::Client::HTTPBackend::TransportMethods#verify_path! (method)">#verify_path!</a></span>, <span class='object_link'><a href="HTTPBackend/TransportMethods.html#verify_path_and_body%21-instance_method" title="Riak::Client::HTTPBackend::TransportMethods#verify_path_and_body! (method)">#verify_path_and_body!</a></span></p>

  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="../Util/Translation.html" title="Riak::Util::Translation (module)">Util::Translation</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../Util/Translation.html#i18n_scope-instance_method" title="Riak::Util::Translation#i18n_scope (method)">#i18n_scope</a></span>, <span class='object_link'><a href="../Util/Translation.html#t-instance_method" title="Riak::Util::Translation#t (method)">#t</a></span></p>

  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="../Util/Escape.html" title="Riak::Util::Escape (module)">Util::Escape</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../Util/Escape.html#escape-instance_method" title="Riak::Util::Escape#escape (method)">#escape</a></span>, <span class='object_link'><a href="../Util/Escape.html#unescape-instance_method" title="Riak::Util::Escape#unescape (method)">#unescape</a></span></p>
<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <p class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="Riak::Client::HTTPBackend (class)">HTTPBackend</a></span></tt>) <strong>initialize</strong>(client) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Create an HTTPBackend for the Riak::Client.
</p>


  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>client</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Client.html" title="Riak::Client (class)">Client</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
the client
</p>
</div>
      
    </li>
  
</ul>
<h3>Raises:</h3>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>ArgumentError</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


48
49
50
51</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'riak-client/lib/riak/client/http_backend.rb', line 48</span>

<span class='kw'>def</span> <span class='id initialize'>initialize</span><span class='lparen'>(</span><span class='id client'>client</span><span class='rparen'>)</span>
  <span class='id raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='id t'>t</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>client_type</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:client</span> <span class='op'>=&gt;</span> <span class='id client'>client</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='const'>Client</span> <span class='op'>===</span> <span class='id client'>client</span>
  <span class='ivar'>@client</span> <span class='op'>=</span> <span class='id client'>client</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <span id="client-instance_method"></span>
      <div class="method_details first">
  <p class="signature first" id="client-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>client</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
The Riak::Client that uses this backend
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


44
45
46</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'riak-client/lib/riak/client/http_backend.rb', line 44</span>

<span class='kw'>def</span> <span class='id client'>client</span>
  <span class='ivar'>@client</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="delete_object-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>delete_object</strong>(bucket, key, rw = nil) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Deletes an object
</p>


  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>bucket</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Bucket.html" title="Riak::Bucket (class)">Bucket</a></span></tt>, <tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
the bucket where the object lives
</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>key</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
the key where the object lives
</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>rw</span>
      
      
        <span class='type'>(<tt>Fixnum</tt>, <tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>, <tt><span class='object_link'><a href="../../Symbol.html" title="Symbol (class)">Symbol</a></span></tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>
the read/write quorum for the request
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


114
115
116
117
118</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'riak-client/lib/riak/client/http_backend.rb', line 114</span>

<span class='kw'>def</span> <span class='id delete_object'>delete_object</span><span class='lparen'>(</span><span class='id bucket'>bucket</span><span class='comma'>,</span> <span class='id key'>key</span><span class='comma'>,</span> <span class='id rw'>rw</span><span class='op'>=</span><span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id bucket'>bucket</span> <span class='op'>=</span> <span class='id bucket'>bucket</span><span class='period'>.</span><span class='id name'>name</span> <span class='kw'>if</span> <span class='const'>Bucket</span> <span class='op'>===</span> <span class='id bucket'>bucket</span>
  <span class='id options'>options</span> <span class='op'>=</span> <span class='id rw'>rw</span> <span class='op'>?</span> <span class='lbrace'>{</span><span class='symbol'>:rw</span> <span class='op'>=&gt;</span> <span class='id rw'>rw</span><span class='rbrace'>}</span> <span class='op'>:</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='id delete'>delete</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='int'>204</span><span class='comma'>,</span> <span class='int'>404</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id riak_kv_wm_raw'>riak_kv_wm_raw</span><span class='comma'>,</span> <span class='id escape'>escape</span><span class='lparen'>(</span><span class='id bucket'>bucket</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id escape'>escape</span><span class='lparen'>(</span><span class='id key'>key</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id options'>options</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="fetch_object-instance_method">
  
    - (<tt><span class='object_link'><a href="../RObject.html" title="Riak::RObject (class)">RObject</a></span></tt>) <strong>fetch_object</strong>(bucket, key, r = nil) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Fetches an object by bucket/key
</p>


  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>bucket</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Bucket.html" title="Riak::Bucket (class)">Bucket</a></span></tt>, <tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
the bucket where the object is stored
</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>key</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
the key of the object
</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>r</span>
      
      
        <span class='type'>(<tt>Fixnum</tt>, <tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>, <tt><span class='object_link'><a href="../../Symbol.html" title="Symbol (class)">Symbol</a></span></tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>
the read quorum for the request - how many nodes should concur on the read
</p>
</div>
      
    </li>
  
</ul>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../RObject.html" title="Riak::RObject (class)">RObject</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
the fetched object
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


69
70
71
72
73
74</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'riak-client/lib/riak/client/http_backend.rb', line 69</span>

<span class='kw'>def</span> <span class='id fetch_object'>fetch_object</span><span class='lparen'>(</span><span class='id bucket'>bucket</span><span class='comma'>,</span> <span class='id key'>key</span><span class='comma'>,</span> <span class='id r'>r</span><span class='op'>=</span><span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id bucket'>bucket</span> <span class='op'>=</span> <span class='const'>Bucket</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id client'>client</span><span class='comma'>,</span> <span class='id bucket'>bucket</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='const'>String</span> <span class='op'>===</span> <span class='id bucket'>bucket</span>
  <span class='id options'>options</span> <span class='op'>=</span> <span class='id r'>r</span> <span class='op'>?</span> <span class='lbrace'>{</span><span class='symbol'>:r</span> <span class='op'>=&gt;</span> <span class='id r'>r</span><span class='rbrace'>}</span> <span class='op'>:</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='id response'>response</span> <span class='op'>=</span> <span class='id get'>get</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='int'>200</span><span class='comma'>,</span><span class='int'>300</span><span class='rbracket'>]</span><span class='comma'>,</span><span class='id riak_kv_wm_raw'>riak_kv_wm_raw</span><span class='comma'>,</span> <span class='id escape'>escape</span><span class='lparen'>(</span><span class='id bucket'>bucket</span><span class='period'>.</span><span class='id name'>name</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id escape'>escape</span><span class='lparen'>(</span><span class='id key'>key</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id options'>options</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id load_object'>load_object</span><span class='lparen'>(</span><span class='const'>RObject</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id bucket'>bucket</span><span class='comma'>,</span> <span class='id key'>key</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id response'>response</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="get_bucket_props-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Hash.html" title="Hash (class)">Hash</a></span></tt>) <strong>get_bucket_props</strong>(bucket) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Fetches bucket properties
</p>


  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>bucket</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Bucket.html" title="Riak::Bucket (class)">Bucket</a></span></tt>, <tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
the bucket properties to fetch
</p>
</div>
      
    </li>
  
</ul>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../Hash.html" title="Hash (class)">Hash</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
bucket properties
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


123
124
125
126
127</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'riak-client/lib/riak/client/http_backend.rb', line 123</span>

<span class='kw'>def</span> <span class='id get_bucket_props'>get_bucket_props</span><span class='lparen'>(</span><span class='id bucket'>bucket</span><span class='rparen'>)</span>
  <span class='id bucket'>bucket</span> <span class='op'>=</span> <span class='id bucket'>bucket</span><span class='period'>.</span><span class='id name'>name</span> <span class='kw'>if</span> <span class='const'>Bucket</span> <span class='op'>===</span> <span class='id bucket'>bucket</span>
  <span class='id response'>response</span> <span class='op'>=</span> <span class='id get'>get</span><span class='lparen'>(</span><span class='int'>200</span><span class='comma'>,</span> <span class='id riak_kv_wm_raw'>riak_kv_wm_raw</span><span class='comma'>,</span> <span class='id escape'>escape</span><span class='lparen'>(</span><span class='id bucket'>bucket</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='symbol'>:keys</span> <span class='op'>=&gt;</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='symbol'>:props</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='const'>JSON</span><span class='period'>.</span><span class='id parse'>parse</span><span class='lparen'>(</span><span class='id response'>response</span><span class='lbracket'>[</span><span class='symbol'>:body</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>props</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="link_walk-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="../../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="../RObject.html" title="Riak::RObject (class)">RObject</a></span>&gt;&gt;</tt>) <strong>link_walk</strong>(robject, walk_specs) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Performs a link-walking query
</p>


  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>robject</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../RObject.html" title="Riak::RObject (class)">RObject</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
the object to start at
</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>walk_specs</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="../WalkSpec.html" title="Riak::WalkSpec (class)">WalkSpec</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
a list of walk specifications to process
</p>
</div>
      
    </li>
  
</ul>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="../../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="../RObject.html" title="Riak::RObject (class)">RObject</a></span>&gt;&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
a list of the matched objects, grouped by phase
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


199
200
201
202
203
204
205
206
207
208
209
210
211
212
213</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'riak-client/lib/riak/client/http_backend.rb', line 199</span>

<span class='kw'>def</span> <span class='id link_walk'>link_walk</span><span class='lparen'>(</span><span class='id robject'>robject</span><span class='comma'>,</span> <span class='id walk_specs'>walk_specs</span><span class='rparen'>)</span>
  <span class='id response'>response</span> <span class='op'>=</span> <span class='id get'>get</span><span class='lparen'>(</span><span class='int'>200</span><span class='comma'>,</span> <span class='id riak_kv_wm_link_walker'>riak_kv_wm_link_walker</span><span class='comma'>,</span> <span class='id escape'>escape</span><span class='lparen'>(</span><span class='id robject'>robject</span><span class='period'>.</span><span class='id bucket'>bucket</span><span class='period'>.</span><span class='id name'>name</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id escape'>escape</span><span class='lparen'>(</span><span class='id robject'>robject</span><span class='period'>.</span><span class='id key'>key</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id walk_specs'>walk_specs</span><span class='period'>.</span><span class='id join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id boundary'>boundary</span> <span class='op'>=</span> <span class='const'>Util</span><span class='op'>::</span><span class='const'>Multipart</span><span class='period'>.</span><span class='id extract_boundary'>extract_boundary</span><span class='lparen'>(</span><span class='id response'>response</span><span class='lbracket'>[</span><span class='symbol'>:headers</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>content-type</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id first'>first</span><span class='rparen'>)</span>
    <span class='const'>Util</span><span class='op'>::</span><span class='const'>Multipart</span><span class='period'>.</span><span class='id parse'>parse</span><span class='lparen'>(</span><span class='id response'>response</span><span class='lbracket'>[</span><span class='symbol'>:body</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id boundary'>boundary</span><span class='rparen'>)</span><span class='period'>.</span><span class='id map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id group'>group</span><span class='op'>|</span>
      <span class='id group'>group</span><span class='period'>.</span><span class='id map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id obj'>obj</span><span class='op'>|</span>
        <span class='kw'>if</span> <span class='id obj'>obj</span><span class='lbracket'>[</span><span class='symbol'>:headers</span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span> <span class='id obj'>obj</span><span class='lbracket'>[</span><span class='symbol'>:body</span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span> <span class='id obj'>obj</span><span class='lbracket'>[</span><span class='symbol'>:headers</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>location</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span>
          <span class='id bucket'>bucket</span> <span class='op'>=</span> <span class='backref'>$1</span> <span class='kw'>if</span> <span class='id obj'>obj</span><span class='lbracket'>[</span><span class='symbol'>:headers</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>location</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id first'>first</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>%r{</span><span class='tstring_content'>/.*/(.*)/.*$</span><span class='regexp_end'>}</span></span>
          <span class='id load_object'>load_object</span><span class='lparen'>(</span><span class='const'>RObject</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id client'>client</span><span class='period'>.</span><span class='id bucket'>bucket</span><span class='lparen'>(</span><span class='id bucket'>bucket</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id obj'>obj</span><span class='rparen'>)</span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>else</span>
    <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="list_buckets-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="../../String.html" title="String (class)">String</a></span>&gt;</tt>) <strong>list_buckets</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Lists known buckets
</p>


  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="../../String.html" title="String (class)">String</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
the list of buckets
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


157
158
159
160</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'riak-client/lib/riak/client/http_backend.rb', line 157</span>

<span class='kw'>def</span> <span class='id list_buckets'>list_buckets</span>
  <span class='id response'>response</span> <span class='op'>=</span> <span class='id get'>get</span><span class='lparen'>(</span><span class='int'>200</span><span class='comma'>,</span> <span class='id riak_kv_wm_raw'>riak_kv_wm_raw</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='symbol'>:buckets</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='const'>JSON</span><span class='period'>.</span><span class='id parse'>parse</span><span class='lparen'>(</span><span class='id response'>response</span><span class='lbracket'>[</span><span class='symbol'>:body</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>buckets</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="list_keys-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="../../String.html" title="String (class)">String</a></span>&gt;</tt>) <strong>list_keys</strong>(bucket) {|Array&lt;String&gt;| ... }
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
List keys in a bucket
</p>


  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>bucket</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Bucket.html" title="Riak::Bucket (class)">Bucket</a></span></tt>, <tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
the bucket to fetch the keys for
</p>
</div>
      
    </li>
  
</ul>
<h3>Yields:</h3>
<ul class="yield">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="../../String.html" title="String (class)">String</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
a list of keys from the current streamed chunk
</p>
</div>
      
    </li>
  
</ul>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="../../String.html" title="String (class)">String</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
the list of keys, if no block was given
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


144
145
146
147
148
149
150
151
152
153</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'riak-client/lib/riak/client/http_backend.rb', line 144</span>

<span class='kw'>def</span> <span class='id list_keys'>list_keys</span><span class='lparen'>(</span><span class='id bucket'>bucket</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span>
  <span class='id bucket'>bucket</span> <span class='op'>=</span> <span class='id bucket'>bucket</span><span class='period'>.</span><span class='id name'>name</span> <span class='kw'>if</span> <span class='const'>Bucket</span> <span class='op'>===</span> <span class='id bucket'>bucket</span>
  <span class='kw'>if</span> <span class='id block_given?'>block_given?</span>          
    <span class='id get'>get</span><span class='lparen'>(</span><span class='int'>200</span><span class='comma'>,</span> <span class='id riak_kv_wm_raw'>riak_kv_wm_raw</span><span class='comma'>,</span> <span class='id escape'>escape</span><span class='lparen'>(</span><span class='id bucket'>bucket</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='symbol'>:props</span> <span class='op'>=&gt;</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='symbol'>:keys</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>stream</span><span class='tstring_end'>'</span></span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='const'>KeyStreamer</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id block'>block</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id response'>response</span> <span class='op'>=</span> <span class='id get'>get</span><span class='lparen'>(</span><span class='int'>200</span><span class='comma'>,</span> <span class='id riak_kv_wm_raw'>riak_kv_wm_raw</span><span class='comma'>,</span> <span class='id escape'>escape</span><span class='lparen'>(</span><span class='id bucket'>bucket</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='symbol'>:props</span> <span class='op'>=&gt;</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='symbol'>:keys</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
    <span class='id obj'>obj</span> <span class='op'>=</span> <span class='const'>JSON</span><span class='period'>.</span><span class='id parse'>parse</span><span class='lparen'>(</span><span class='id response'>response</span><span class='lbracket'>[</span><span class='symbol'>:body</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='id obj'>obj</span> <span class='op'>&amp;&amp;</span> <span class='id obj'>obj</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>keys</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id map'>map</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id k'>k</span><span class='op'>|</span> <span class='id unescape'>unescape</span><span class='lparen'>(</span><span class='id k'>k</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="mapred-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span>&gt;</tt>) <strong>mapred</strong>(mr) {|Fixnum, Object| ... }
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Performs a MapReduce query.
</p>


  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>mr</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../MapReduce.html" title="Riak::MapReduce (class)">MapReduce</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
the query to perform
</p>
</div>
      
    </li>
  
</ul>
<h3>Yields:</h3>
<ul class="yield">
  
    <li>
      
      
        <span class='type'>(<tt>Fixnum</tt>, <tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
the phase number and single result from the phase
</p>
</div>
      
    </li>
  
</ul>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
the list of results, if no block was given
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'riak-client/lib/riak/client/http_backend.rb', line 168</span>

<span class='kw'>def</span> <span class='id mapred'>mapred</span><span class='lparen'>(</span><span class='id mr'>mr</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id block_given?'>block_given?</span>
    <span class='id parser'>parser</span> <span class='op'>=</span> <span class='const'>Riak</span><span class='op'>::</span><span class='const'>Util</span><span class='op'>::</span><span class='const'>Multipart</span><span class='op'>::</span><span class='const'>StreamParser</span><span class='period'>.</span><span class='id new'>new</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id response'>response</span><span class='op'>|</span>
      <span class='id result'>result</span> <span class='op'>=</span> <span class='const'>JSON</span><span class='period'>.</span><span class='id parse'>parse</span><span class='lparen'>(</span><span class='id response'>response</span><span class='lbracket'>[</span><span class='symbol'>:body</span><span class='rbracket'>]</span><span class='rparen'>)</span>
      <span class='kw'>yield</span> <span class='id result'>result</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>phase</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id result'>result</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>data</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span>
    <span class='kw'>end</span>
    <span class='id post'>post</span><span class='lparen'>(</span><span class='int'>200</span><span class='comma'>,</span> <span class='id riak_kv_wm_mapred'>riak_kv_wm_mapred</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='symbol'>:chunked</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='id mr'>mr</span><span class='period'>.</span><span class='id to_json'>to_json</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Content-Type</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>application/json</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Accept</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>application/json</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id parser'>parser</span><span class='rparen'>)</span>
    <span class='kw'>nil</span>
  <span class='kw'>else</span>
    <span class='id response'>response</span> <span class='op'>=</span> <span class='id post'>post</span><span class='lparen'>(</span><span class='int'>200</span><span class='comma'>,</span> <span class='id riak_kv_wm_mapred'>riak_kv_wm_mapred</span><span class='comma'>,</span> <span class='id mr'>mr</span><span class='period'>.</span><span class='id to_json'>to_json</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Content-Type</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>application/json</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Accept</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>application/json</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='rparen'>)</span>
    <span class='kw'>begin</span>
      <span class='const'>JSON</span><span class='period'>.</span><span class='id parse'>parse</span><span class='lparen'>(</span><span class='id response'>response</span><span class='lbracket'>[</span><span class='symbol'>:body</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='kw'>rescue</span>
      <span class='id response'>response</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="ping-instance_method">
  
    - (<tt>true</tt>, <tt>false</tt>) <strong>ping</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Pings the server
</p>


  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>true</tt>, <tt>false</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
whether the server is available
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


55
56
57
58
59
60</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'riak-client/lib/riak/client/http_backend.rb', line 55</span>

<span class='kw'>def</span> <span class='id ping'>ping</span>
  <span class='id get'>get</span><span class='lparen'>(</span><span class='int'>200</span><span class='comma'>,</span> <span class='id riak_kv_wm_ping'>riak_kv_wm_ping</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='kw'>true</span>
<span class='kw'>rescue</span>
  <span class='kw'>false</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="reload_object-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>reload_object</strong>(robject, r = nil) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Reloads the data for a given RObject, a special case of <span class='object_link'><a href="#fetch_object-instance_method" title="Riak::Client::HTTPBackend#fetch_object (method)">#fetch_object</a></span>.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


77
78
79
80
81
82
83
84
85</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'riak-client/lib/riak/client/http_backend.rb', line 77</span>

<span class='kw'>def</span> <span class='id reload_object'>reload_object</span><span class='lparen'>(</span><span class='id robject'>robject</span><span class='comma'>,</span> <span class='id r'>r</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id options'>options</span> <span class='op'>=</span> <span class='id r'>r</span> <span class='op'>?</span> <span class='lbrace'>{</span><span class='symbol'>:r</span> <span class='op'>=&gt;</span> <span class='id r'>r</span><span class='rbrace'>}</span> <span class='op'>:</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='id response'>response</span> <span class='op'>=</span> <span class='id get'>get</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='int'>200</span><span class='comma'>,</span><span class='int'>300</span><span class='comma'>,</span><span class='int'>304</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id riak_kv_wm_raw'>riak_kv_wm_raw</span><span class='comma'>,</span> <span class='id escape'>escape</span><span class='lparen'>(</span><span class='id robject'>robject</span><span class='period'>.</span><span class='id bucket'>bucket</span><span class='period'>.</span><span class='id name'>name</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id escape'>escape</span><span class='lparen'>(</span><span class='id robject'>robject</span><span class='period'>.</span><span class='id key'>key</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id options'>options</span><span class='comma'>,</span> <span class='id reload_headers'>reload_headers</span><span class='lparen'>(</span><span class='id robject'>robject</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id response'>response</span><span class='lbracket'>[</span><span class='symbol'>:code</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id to_i'>to_i</span> <span class='op'>==</span> <span class='int'>304</span>
    <span class='id robject'>robject</span>
  <span class='kw'>else</span>
    <span class='id load_object'>load_object</span><span class='lparen'>(</span><span class='id robject'>robject</span><span class='comma'>,</span> <span class='id response'>response</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="set_bucket_props-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>set_bucket_props</strong>(bucket, props) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Sets bucket properties
</p>


  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>bucket</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Bucket.html" title="Riak::Bucket (class)">Bucket</a></span></tt>, <tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
the bucket to set properties on
</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>properties</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../Hash.html" title="Hash (class)">Hash</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
the properties to set
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


132
133
134
135
136</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'riak-client/lib/riak/client/http_backend.rb', line 132</span>

<span class='kw'>def</span> <span class='id set_bucket_props'>set_bucket_props</span><span class='lparen'>(</span><span class='id bucket'>bucket</span><span class='comma'>,</span> <span class='id props'>props</span><span class='rparen'>)</span>
  <span class='id bucket'>bucket</span> <span class='op'>=</span> <span class='id bucket'>bucket</span><span class='period'>.</span><span class='id name'>name</span> <span class='kw'>if</span> <span class='const'>Bucket</span> <span class='op'>===</span> <span class='id bucket'>bucket</span>
  <span class='id body'>body</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>props</span><span class='tstring_end'>'</span></span> <span class='op'>=&gt;</span> <span class='id props'>props</span><span class='rbrace'>}</span><span class='period'>.</span><span class='id to_json'>to_json</span>
  <span class='id put'>put</span><span class='lparen'>(</span><span class='int'>204</span><span class='comma'>,</span> <span class='id riak_kv_wm_raw'>riak_kv_wm_raw</span><span class='comma'>,</span> <span class='id escape'>escape</span><span class='lparen'>(</span><span class='id bucket'>bucket</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id body'>body</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Content-Type</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>application/json</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="stats-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Hash.html" title="Hash (class)">Hash</a></span></tt>) <strong>stats</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Gets health statistics
</p>


  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../Hash.html" title="Hash (class)">Hash</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
information about the server, including stats
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


188
189
190
191</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'riak-client/lib/riak/client/http_backend.rb', line 188</span>

<span class='kw'>def</span> <span class='id stats'>stats</span>
  <span class='id response'>response</span> <span class='op'>=</span> <span class='id get'>get</span><span class='lparen'>(</span><span class='int'>200</span><span class='comma'>,</span> <span class='id riak_kv_wm_stats'>riak_kv_wm_stats</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='const'>JSON</span><span class='period'>.</span><span class='id parse'>parse</span><span class='lparen'>(</span><span class='id response'>response</span><span class='lbracket'>[</span><span class='symbol'>:body</span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="store_object-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>store_object</strong>(robject, returnbody = false, w = nil, dw = nil) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Stores an object
</p>


  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>robject</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../RObject.html" title="Riak::RObject (class)">RObject</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
the object to store
</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>returnbody</span>
      
      
        <span class='type'>(<tt>true</tt>, <tt>false</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>false</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>
(false) whether to update the object after write with the new value
</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>w</span>
      
      
        <span class='type'>(<tt>Fixnum</tt>, <tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>, <tt><span class='object_link'><a href="../../Symbol.html" title="Symbol (class)">Symbol</a></span></tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>
the write quorum
</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>dw</span>
      
      
        <span class='type'>(<tt>Fixnum</tt>, <tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>, <tt><span class='object_link'><a href="../../Symbol.html" title="Symbol (class)">Symbol</a></span></tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>
the durable write quorum
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


93
94
95
96
97
98
99
100
101
102
103
104
105
106</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'riak-client/lib/riak/client/http_backend.rb', line 93</span>

<span class='kw'>def</span> <span class='id store_object'>store_object</span><span class='lparen'>(</span><span class='id robject'>robject</span><span class='comma'>,</span> <span class='id returnbody'>returnbody</span><span class='op'>=</span><span class='kw'>false</span><span class='comma'>,</span> <span class='id w'>w</span><span class='op'>=</span><span class='kw'>nil</span><span class='comma'>,</span> <span class='id dw'>dw</span><span class='op'>=</span><span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id query'>query</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='period'>.</span><span class='id tap'>tap</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id q'>q</span><span class='op'>|</span>
    <span class='id q'>q</span><span class='lbracket'>[</span><span class='symbol'>:returnbody</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id returnbody'>returnbody</span> <span class='kw'>unless</span> <span class='id returnbody'>returnbody</span><span class='period'>.</span><span class='id nil?'>nil?</span>
    <span class='id q'>q</span><span class='lbracket'>[</span><span class='symbol'>:w</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id w'>w</span> <span class='kw'>unless</span> <span class='id w'>w</span><span class='period'>.</span><span class='id nil?'>nil?</span>
    <span class='id q'>q</span><span class='lbracket'>[</span><span class='symbol'>:dw</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id dw'>dw</span> <span class='kw'>unless</span> <span class='id dw'>dw</span><span class='period'>.</span><span class='id nil?'>nil?</span>
  <span class='kw'>end</span>
  <span class='id method'>method</span><span class='comma'>,</span> <span class='id codes'>codes</span><span class='comma'>,</span> <span class='id path'>path</span> <span class='op'>=</span> <span class='kw'>if</span> <span class='id robject'>robject</span><span class='period'>.</span><span class='id key'>key</span><span class='period'>.</span><span class='id present?'>present?</span>
                          <span class='lbracket'>[</span><span class='symbol'>:put</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='int'>200</span><span class='comma'>,</span><span class='int'>204</span><span class='comma'>,</span><span class='int'>300</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id escape'>escape</span><span class='lparen'>(</span><span class='id robject'>robject</span><span class='period'>.</span><span class='id bucket'>bucket</span><span class='period'>.</span><span class='id name'>name</span><span class='rparen'>)</span><span class='rbrace'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id escape'>escape</span><span class='lparen'>(</span><span class='id robject'>robject</span><span class='period'>.</span><span class='id key'>key</span><span class='rparen'>)</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
                        <span class='kw'>else</span>
                          <span class='lbracket'>[</span><span class='symbol'>:post</span><span class='comma'>,</span> <span class='int'>201</span><span class='comma'>,</span> <span class='id escape'>escape</span><span class='lparen'>(</span><span class='id robject'>robject</span><span class='period'>.</span><span class='id bucket'>bucket</span><span class='period'>.</span><span class='id name'>name</span><span class='rparen'>)</span><span class='rbracket'>]</span>
                        <span class='kw'>end</span>
  <span class='id response'>response</span> <span class='op'>=</span> <span class='id send'>send</span><span class='lparen'>(</span><span class='id method'>method</span><span class='comma'>,</span> <span class='id codes'>codes</span><span class='comma'>,</span> <span class='id riak_kv_wm_raw'>riak_kv_wm_raw</span><span class='comma'>,</span> <span class='id path'>path</span><span class='comma'>,</span> <span class='id query'>query</span><span class='comma'>,</span> <span class='id robject'>robject</span><span class='period'>.</span><span class='id raw_data'>raw_data</span><span class='comma'>,</span> <span class='id store_headers'>store_headers</span><span class='lparen'>(</span><span class='id robject'>robject</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='id load_object'>load_object</span><span class='lparen'>(</span><span class='id robject'>robject</span><span class='comma'>,</span> <span class='id response'>response</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id returnbody'>returnbody</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Wed Jun 15 08:56:44 2011 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.7.2 (ruby-1.9.2).
</div>

  </body>
</html>